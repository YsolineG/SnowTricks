{% extends 'base.html.twig' %}

{% block title %}Modifier{% endblock %}

{% block body %}
<style>
    .example-wrapper { margin: 1em auto; max-width: 800px; width: 95%; font: 18px/1.5 sans-serif; }
    .example-wrapper code { background: #F5F5F5; padding: 2px 6px; }
</style>

<div class="example-wrapper">
    <h1>Modifier</h1>

    {{ form_start(figureForm) }}
        {{ form_row(figureForm.name, {
            label: "Nom"
        }) }}
        {{ form_row(figureForm.description, {
            label: "Description"
        }) }}
        {{ form_row(figureForm.figureGroup, {
            label: "Groupe du tricks"
        }) }}
        {{ form_row(figureForm.photos, {
            label: "Photo"
        }) }}

        {% for photo in figure.photo %}
            <div>
                <img src="{{ asset('/uploads/' ~ photo.name) }}" alt="Photo" width="150">
                <a href="{{ path('delete_photo', {id: photo.id}) }}"
                   data-delete data-token="{{ csrf_token('delete' ~ photo.id) }}">Supprimer</a>
            </div>
        {% endfor %}

        {{ form_label(figureForm.videos) }}
        {{ form_errors(figureForm.videos) }}

        <ul id="list-video">
            {% for videoField in figureForm.videos %}
                <li>
                    {{ form_errors(videoField) }}
                    {{ form_widget(videoField) }}
                </li>
            {% endfor %}
        </ul>
        <button type="button" id="button-add-video" class="btn" data-template="{{ form_widget(figureForm.videos.vars.prototype)|e }}">Ajouter une vid√©o</button>

        {% for video in figure.videos %}
            <div>
                <iframe width="560" height="315" src="{{ video.url }}" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                <a href="{{ path('delete_video', {id: video.id}) }}" data-delete data-token="{{ csrf_token('delete' ~ video.id) }}">Supprimer</a>
            </div>
        {% endfor %}

        <button type="submit" class="btn">Modifier</button>
    {{ form_end(figureForm) }}

    <a href="{{ path('home') }}">Retour</a>
</div>
{% endblock %}

{% block javascripts %}
    <script src="{{ asset('js/photos.js') }}"></script>
    <script src="{{ asset('js/deleteVideos.js') }}"></script>
    <script src="{{ asset('js/videos.js') }}"></script>
{% endblock %}
